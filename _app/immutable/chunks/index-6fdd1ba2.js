import{F as a,G as q,H as z,s as S,I as j,J as w}from"./index-52bb2ca0.js";const c=[];function g(t,o){return{subscribe:y(t,o).subscribe}}function y(t,o=a){let i;const n=new Set;function l(s){if(S(t,s)&&(t=s,i)){const r=!c.length;for(const e of n)e[1](),c.push(e,t);if(r){for(let e=0;e<c.length;e+=2)c[e][0](c[e+1]);c.length=0}}}function f(s){l(s(t))}function b(s,r=a){const e=[s,r];return n.add(e),n.size===1&&(i=o(l)||a),s(t),()=>{n.delete(e),n.size===0&&(i(),i=null)}}return{set:l,update:f,subscribe:b}}function A(t,o,i){const n=!Array.isArray(t),l=n?[t]:t,f=o.length<2;return g(i,b=>{let s=!1;const r=[];let e=0,p=a;const d=()=>{if(e)return;p();const u=o(n?r[0]:r,b);f?b(u):p=j(u)?u:a},h=l.map((u,_)=>q(u,m=>{r[_]=m,e&=~(1<<_),s&&d()},()=>{e|=1<<_}));return s=!0,d(),function(){z(h),p()}})}const x=Object.freeze(Object.defineProperty({__proto__:null,derived:A,readable:g,writable:y,get:w},Symbol.toStringTag,{value:"Module"}));export{x as s,y as w};
